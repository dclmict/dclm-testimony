# Services
services:

  # Testimony Service
  testimony-app:
    container_name: testimony-app
    image: tiredofit/nginx-php-fpm:8.2-debian
    environment:
      DEBUG_MODE: ${DEBUG_MODE}
      TIMEZONE: ${TIMEZONE}
      CONTAINER_NAME: ${CONTAINER_NAME}
      NGINX_WEBROOT: ${NGINX_WEBROOT}
      # NGINX_SITE_ENABLED: ${NGINX_SITE_ENABLED}
      NGINX_LOG_ACCESS_FILE: ${NGINX_LOG_ACCESS_FILE}
      NGINX_LOG_ERROR_FILE: ${NGINX_LOG_ERROR_FILE}
      NGINX_LOG_LEVEL_ERROR: ${NGINX_LOG_LEVEL_ERROR}
      PHP_KITCHENSINK: ${PHP_KITCHENSINK}
    ports:
      - 1001:80
      - 4001:443
    networks:
      - dclm
    volumes:
      - .:/www/html
      # - ../ops/docker/nginx/testify.prod.conf:/etc/nginx/sites-available/default.conf
      # - ../ops/docker/nginx/proxy:/etc/nginx/proxy_params
      # - ../ops/docker/nginx/ssl.conf:/etc/nginx/ssl.conf
      # - /etc/letsencrypt:/etc/letsencrypt
    restart: always
    working_dir: /www/html

networks:
  dclm:
    name: dclm
    external: true